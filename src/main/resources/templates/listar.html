<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Listagem de Filmes</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/listar.css" />
</head>

<body class="preload">

    <header>
        <a th:href="@{/}">Home</a>
        <a th:href="@{/formulario}">Cadastrar Filme</a>
        <a th:href="@{/listar}">Listar Filmes</a>
    </header>

    <div class="section">
        <h2>Filmes Cadastrados</h2>
        <div class="movie-row" id="movieRow">
            <div th:each="filme : ${filmes}" class="movie-card">
                <img th:src="@{'/images/' + ${filme.caminhoImagem}}" th:alt="${filme.titulo}">
            </div>
        </div>
    </div>

    <!-- Botões de navegação -->
    <button id="btn-esquerda">◀</button>
    <button id="btn-direita">▶</button>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Título</th>
                <th>Gênero</th>
                <th>Duração</th>
                <th colspan="2">Ações</th>
            </tr>
        </thead>
        <tbody th:each="fil : ${filmes}">
            <tr>
                <td th:text="${fil.id}"></td>
                <td th:text="${fil.titulo}"></td>
                <td th:text="${fil.genero}"></td>
                <td><span th:text="${fil.duracao}"></span> min</td>
                <td><a th:href="@{'/editar/' + ${fil.id}}" class="edit-btn">Editar</a></td>
                <td>
                    <form th:action="@{'/deletar/' + ${fil.id}}" method="post" class="delete-form"
                        th:attr="data-id=${fil.id}">
                        <input type="submit" value="Deletar" class="delete-btn" />
                    </form>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Modal de confirmação -->
    <div id="confirmModal" class="modal-overlay" style="display: none;">
        <div class="modal-box">
            <h3>Tem certeza que deseja excluir este filme?</h3>
            <p>ID do filme: <span id="modalMovieId"></span></p>
            <div class="modal-actions">
                <button id="confirmBtn">Sim</button>
                <button id="cancelBtn">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="/js/transitions.js"></script>
    <script src="/js/listar.js"></script>
</body>

</html>